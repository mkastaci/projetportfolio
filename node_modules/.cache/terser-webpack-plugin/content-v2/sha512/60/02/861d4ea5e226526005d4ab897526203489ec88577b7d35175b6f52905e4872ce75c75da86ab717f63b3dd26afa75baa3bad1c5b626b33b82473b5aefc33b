{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"js/chat\"],{tzcc:function(e,t,a){(function(e){a(\"fbCW\"),a(\"DQNa\"),a(\"R5XZ\");var t={init:function(){e(\".chatform\").submit(t.sendmessage);var a=new Date;$test=a.getFullYear()+\"-\"+(a.getMonth()+1)+\"-\"+a.getDate(),t.date=$test+\" 00:00:00\",console.log(t.date)},date:\"\",deletemessage:function(t){var a=e(t.currentTarget),n=a.data(\"idmessage\");a.parent().remove(),e.ajax({url:\"http://127.0.0.1:8000/deletemessage/\"+n,method:\"POST\",dataType:\"\"}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")}))},sendmessage:function(t){t.preventDefault();var a=e(\".chatmessage\"),n=e(\".chatmessage\").val();a.css(\"border\",\"none\");var s=0;0==/^[A-Z0-9çéà:=;&è.@_,\\#\\-\\\"\\' \\(\\)\\?\\!\\r\\n]+$/i.test(n)&&(s++,a.css(\"border\",\"1px solid red\")),0==s&&(e(\".chatmessage\").val(\"\"),e.ajax({url:\"http://127.0.0.1:8000/addmessage\",method:\"POST\",dataType:\"\",data:{message:n}}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")})))},loadchatmessage:function(){e.ajax({url:\"http://127.0.0.1:8000/loadmessage\",method:\"POST\",dataType:\"json\",data:{date:t.date}}).done((function(a){e.each(a,(function(a,n){var s=e(\"#messageTemplate\").contents().clone();s.find(\".pseudo\").text(n.Username),s.find(\".msg\").text(n.message),s.find(\".msg_date\").text(n.insert_at.date),s.find(\".delete_message\").attr(\"data-idmessage\",n.id),s.find(\".delete_message\").on(\"click\",t.deletemessage),e(\"#messages\").append(s),t.date=n.insert_at}));var n=document.getElementById(\"messages\");n.scrollTop=n.scrollHeight})).fail((function(){alert(\"Réponse ajax incorrecte\")}))}};document.addEventListener(\"DOMContentLoaded\",t.init),setInterval(t.loadchatmessage,2e3)}).call(this,a(\"EVdn\"))}},[[\"tzcc\",\"runtime\",0,1]]]);","extractedComments":[]}