{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"js/chat\"],{fbCW:function(e,t,a){\"use strict\";var n=a(\"I+eb\"),s=a(\"tycR\").find,o=a(\"RNIs\"),d=!0;\"find\"in[]&&Array(1).find((function(){d=!1})),n({target:\"Array\",proto:!0,forced:d},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),o(\"find\")},tzcc:function(e,t,a){a(\"fbCW\"),a(\"DQNa\"),a(\"R5XZ\");var n={init:function(){$(\".chatform\").submit(n.sendmessage);var e=new Date;$test=e.getFullYear()+\"-\"+(e.getMonth()+1)+\"-\"+e.getDate(),n.date=$test+\" 00:00:00\",console.log(n.date)},date:\"\",deletemessage:function(e){var t=$(e.currentTarget),a=t.data(\"idmessage\");t.parent().remove(),$.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/delete/\"+a,method:\"POST\",dataType:\"\"}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")}))},sendmessage:function(e){e.preventDefault();var t=$(\".chatmessage\"),a=$(\"#chatpseudo\"),n=$(\".chatmessage\").val(),s=$(\"#chatpseudo\").val();t.css(\"border\",\"none\"),a.css(\"border\",\"none\");var o=0;0==/^[A-Z0-9]+$/i.test(s)&&(o++,a.css(\"border\",\"1px solid red\")),0==/^[A-Z0-9çéà:=;&è.@_,\\#\\-\\\"\\' \\(\\)\\?\\!\\r\\n]+$/i.test(n)&&(o++,t.css(\"border\",\"1px solid red\")),0==o&&($(\".chatmessage\").val(\"\"),$.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/insert\",method:\"POST\",dataType:\"\",data:{pseudo:s,message:n}}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")})))},loadchatmessage:function(){$.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/messages\",method:\"POST\",dataType:\"json\",data:{date:n.date}}).done((function(e){console.log(e),$.each(e,(function(e,t){var a=$(\"#messageTemplate\").contents().clone();a.find(\".pseudo\").text(t.pseudo),a.find(\".msg\").text(t.message),a.find(\".msg_date\").text(t.date),a.find(\".delete_message\").attr(\"data-idmessage\",t.id),a.find(\".delete_message\").on(\"click\",n.deletemessage),$(\"#messages\").append(a),n.date=t.date}));var t=document.getElementById(\"messages\");t.scrollTop=t.scrollHeight})).fail((function(){alert(\"Réponse ajax incorrecte\")}))}};document.addEventListener(\"DOMContentLoaded\",n.init),setInterval(n.loadchatmessage,2e3)}},[[\"tzcc\",\"runtime\",0]]]);","extractedComments":[]}