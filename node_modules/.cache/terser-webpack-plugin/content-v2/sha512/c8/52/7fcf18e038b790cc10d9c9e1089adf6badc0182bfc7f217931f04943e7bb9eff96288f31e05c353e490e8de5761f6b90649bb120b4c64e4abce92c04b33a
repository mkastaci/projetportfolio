{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"js/chat\"],{tzcc:function(e,t,a){(function(e){a(\"fbCW\"),a(\"DQNa\"),a(\"R5XZ\");var t={init:function(){e(\".chatform\").submit(t.sendmessage);var a=new Date;$test=a.getFullYear()+\"-\"+(a.getMonth()+1)+\"-\"+a.getDate(),t.date=$test+\" 00:00:00\",console.log(t.date)},date:\"\",deletemessage:function(t){var a=e(t.currentTarget),s=a.data(\"idmessage\");a.parent().remove(),e.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/delete/\"+s,method:\"POST\",dataType:\"\"}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")}))},sendmessage:function(t){t.preventDefault();var a=e(\".chatmessage\"),s=e(\"#chatpseudo\"),n=e(\".chatmessage\").val(),o=e(\"#chatpseudo\").val();a.css(\"border\",\"none\"),s.css(\"border\",\"none\");var d=0;0==/^[A-Z0-9]+$/i.test(o)&&(d++,s.css(\"border\",\"1px solid red\")),0==/^[A-Z0-9çéà:=;&è.@_,\\#\\-\\\"\\' \\(\\)\\?\\!\\r\\n]+$/i.test(n)&&(d++,a.css(\"border\",\"1px solid red\")),0==d&&(e(\".chatmessage\").val(\"\"),e.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/insert\",method:\"POST\",dataType:\"\",data:{pseudo:o,message:n}}).done((function(){})).fail((function(){alert(\"Réponse ajax incorrecte\")})))},loadchatmessage:function(){e.ajax({url:\"http://192.168.1.42/perso/portfolio/chat/messages\",method:\"POST\",dataType:\"json\",data:{date:t.date}}).done((function(a){console.log(a),e.each(a,(function(a,s){var n=e(\"#messageTemplate\").contents().clone();n.find(\".pseudo\").text(s.pseudo),n.find(\".msg\").text(s.message),n.find(\".msg_date\").text(s.date),n.find(\".delete_message\").attr(\"data-idmessage\",s.id),n.find(\".delete_message\").on(\"click\",t.deletemessage),e(\"#messages\").append(n),t.date=s.date}));var s=document.getElementById(\"messages\");s.scrollTop=s.scrollHeight})).fail((function(){alert(\"Réponse ajax incorrecte\")}))}};document.addEventListener(\"DOMContentLoaded\",t.init),setInterval(t.loadchatmessage,2e3)}).call(this,a(\"EVdn\"))}},[[\"tzcc\",\"runtime\",0,1]]]);","extractedComments":[]}